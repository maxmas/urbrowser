!function(){"use strict";var a=function(){};a.prototype={project:{name:"urBrowser",version:"3.160331",author:"Kei Cheng",github:"https://github.com/keicheng/urbrowser",website:"http://urbrowser.kule.tw",facebook:"https://www.facebook.com/kule.tw",cdnjs:"https://cdnjs.com/libraries/kule.lazy",license:"MIT License"},root:document.documentElement,getAgent:navigator.userAgent.toLowerCase(),getPlatform:navigator.platform.toLowerCase(),docSize:{width:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},scrSize:{width:function(){return screen.width},height:function(){return screen.height}},bpsInfo:{xs:480,sm:768,md:992,lg:1200},getInformation:{},getName:function(a){a=a||this;var b=a.getAgent;return-1!=b.indexOf("iemobile")?"iemobile":-1!=b.indexOf("cordova")?"cordova":-1!=b.indexOf("opr")||-1!=b.indexOf("opera")||-1!=b.indexOf("opios")?-1!=b.indexOf("version")?"version":-1!=b.indexOf("opios")?"opios":"opr":-1!=b.indexOf("firefox")?"firefox":-1!=b.indexOf("fxios")?"fxios":-1!=b.indexOf("msie")?"msie":-1!=b.indexOf("rv:")&&-1!=b.indexOf("windows")?"rv":-1!=b.indexOf("applewebkit")?-1!=b.indexOf("edge")?"edge":-1!=b.indexOf("chrome")?"chrome":-1!=b.indexOf("version")?"version":-1!=b.indexOf("crios")?"crios":"safari":null},getVersion:function(a,b,c){c=c||this,b=b||"int",a=a||c.getInformation.getName;var d=c.getAgent,e=[];if(a){var f=a.length,g=d.indexOf(a)+f+1,h=20,i=d.substr(g,h),j=/[0-9\.]*/g;return i=i.match(j)[0],e=[parseInt(i,10),i]}return null},OSName:function(a){var b=this,c=b.root,d=b.getAgent,e=b.platforms(),f=e;return a=a||"get","linux"==e?f=-1!=d.indexOf("ubuntu")?"ubuntu":"linux":"windows"==e?f=-1!=d.indexOf("windows nt")?"windows nt":"windows":"iphone"==e||"ipad"==e||"ipod"==e?f="ios":"android"==e&&(f="android"),"get"===a?f:void("set"===a&&c.setAttribute("data-os-name",f))},OSVersion:function(a){var b=this,c=b.root,d=b.getAgent,e=b.getPlatform,f=b.getInformation.os.name,g="mac"===f||"iphone"===e||"ipad"===e?/[0-9_]*/g:/[0-9\.]*/g;a=a||"get","wp"===f?f="windows phone":"chromeos"==f?f="cros i686":"mac"===f?f="mac os x":"ipad"===e?f="cpu os":"iphone"===e&&(f="iphone os");var h=f.length,i=d.indexOf(f)+h+1,j=10,k=d.substr(i,j);return k=k.match(g)[0],k=k.replace(/[_]+/g,"."),"get"===a?k:void("set"===a&&k.length&&c.setAttribute("data-os-version",k))},getBrowserNameAndCore:function(){var e,f,g,a=this,b=a.getAgent,c=a.getInformation.getName,d=a.getInformation.getVersion[0];if(null===c?g=null:"fxios"==c?(e=" firefox",f="fxios",g=f+e):"opr"==c||"opera"==c||"opios"==c?(f="opera",e=-1!=b.indexOf("applewebkit")?" webkit":" presto",g=f+e):"version"==c||"chrome"==c||"crios"==c||"safari"==c?(e=" webkit","edge"==c?f="edge":"chrome"==c||"crios"==c?f="chrome":"version"==c?-1!=b.indexOf("opr")||-1!=b.indexOf("opera")||-1!=b.indexOf("opios")?(f="opera",e=-1!=b.indexOf("applewebkit")?"webkit":"presto",g=f+e):f=-1!=b.indexOf("android")?"adrBuiltin":"safari":f="safari",g=f+e):"msie"==c||"rv"==c||"iemobile"==c?(e="ie",f="ie",g=e):("cordova"===c?(e=" webkit inapp",-1!=b.indexOf("cordova-android")?f="cordova-adr cordova":-1!=b.indexOf("cordova-ios")&&(f="cordova-ios cordova"),g=f+e,d=null):-1!=b.indexOf("iemobile")||-1!=b.indexOf("msie")?g=c+" ie":-1!=b.indexOf("applewebkit")?(e=" webkit",e=-1!=b.indexOf("edge")?" webkit":-1!=b.indexOf("chrome")||-1!=b.indexOf("crios")?" chrome webkit":-1!=b.indexOf("version")&&-1!=b.indexOf("android")?" adrBuiltin webkit":" safari webkit",g=c+e):g=c,f=c),null!==d){var h=f+d,i=g.split(" "),j=i[0]+" "+h;if(i.length>1)for(var k=1;k<i.length;k++)j+=" "+i[k];if("ie"===f)for(var l=11,m=Number(d),n=m;l>n;n++)j+=" "+f+(n+1)+"lt";return j}return g},platforms:function(a){var f,b=this,c=b.root,d=b.getAgent,e=b.getPlatform;return a=a||"get",e.match("win32")||e.match("win64")||e.match("windows")?-1!=d.indexOf("windows phone")||-1!=d.indexOf("iemobile")?f="wp":-1!=d.indexOf("windows")&&(f="windows"):e.match("arm")?-1!=d.indexOf("windows phone")||-1!=d.indexOf("iemobile")?f="wp":-1!=d.indexOf("android")&&(f="android"):f=-1!=e.indexOf("linux")?-1!=d.indexOf("cros")?"chromeos":-1!=d.indexOf("android")?"android":"linux":-1!=e.indexOf("iphone")?"iphone":-1!=e.indexOf("ipad")?"ipad":-1!=e.indexOf("ipod")?"ipod":-1!=e.indexOf("android")?"android":-1!=e.indexOf("mac")?"mac":-1!=e.indexOf("x11")?"unix":-1!=e.indexOf("sunos")?"solaris":"unknown","get"===a?f:void("set"===a&&(c.id=f))},browserVersion:function(a){var g,b=this,c=b.root,d=b.getAgent,e=b.getInformation.getName,f=b.getInformation.getVersion[1];return a=a||"get",g=-1!=d.indexOf(e)?f:"unknown","get"===a?g:void("set"===a&&c.setAttribute("data-browser-version",g))},device:function(a){var h,i,j,b=this,c=b.root,d=b.getAgent,e=b.docSize.width(),f=b.scrSize.width(),g=b.bpsInfo;return a=a||"get",h=-1!=d.indexOf("mobile")||window.orientation?"mobile":"android"===b.getInformation.platforms?"mobile":"desktop",i="mobile"==h?f<g.sm?"phone":"tablet":"desktop",e<g.sm?j="phone":e>=g.sm&&e<g.md?j="tablet":e>=g.md&&(j="desktop"),"get"==a?[i,h,j]:void("set"==a&&(c.setAttribute("data-device",i),c.setAttribute("data-device-type",h),c.setAttribute("data-device-sim",j)))},orientation:function(a){var f,b=this,c=b.root,d=b.docSize,e=b.getInformation.device;return a=a||"get",e=e[1],f="desktop"===e?d.width()>=d.height()?"landscape":"portrait":90==Math.abs(window.orientation)?"landscape":"portrait","get"===a?f:void("set"===a&&c.setAttribute("data-orientation",f))},breakpoints:function(a){var g,h,b=this,c=b.root,d=b.docSize.width(),e=b.scrSize.width(),f=b.bpsInfo;return a=a||"get",d<f.sm?g="screen-xs":d>=f.sm&&d<f.md?g="screen-sm":d>=f.md&&d<f.lg?g="screen-md":d>=f.lg&&(g="screen-lg"),e<f.sm?h="screen-xs":e>=f.sm&&e<f.md?h="screen-sm":e>=f.md&&e<f.lg?h="screen-md":e>=f.lg&&(h="screen-lg"),"get"===a?[h,g]:void("set"===a&&(c.setAttribute("data-screen-range",h),c.setAttribute("data-doc-range",g)))},language:function(a,b,c){var d=c.lang;return a=a||"get",b=b||this,c=c||b.root,(null===d||""===d||"undefined"==d)&&(d=navigator.language||navigator.browserLanguage||navigator.systemLanguage),"get"===a?d:void("set"===a&&(c.lang=d))},resizeInfo:function(a){a.orientation("set"),a.layout("set"),"desktop"!==a.getInformation.device&&a.update(a.urCookies.get("urbrowser")[1],!1)},browserName:function(a){var e,b=this,c=b.root,d=b.getInformation.getBrowserNameAndCore,f=c.className;if(a=a||"get",d){var g=d.split(" ");e=g[0]}else e="unknown";return"get"===a?[e,d]:void("set"===a&&(f.length?c.className+=" "+d:c.className=d,c.setAttribute("data-browser-name",e)))},inApp:function(a){var b=this,c=b.root,d=b.getAgent,e=-1!=d.indexOf("cordova")?!0:!1;a=a||"get";var f=function(){return-1!=d.indexOf("cordova-ios")?"ios":-1!=d.indexOf("cordova-android")?"android":void 0};return"get"===a?e?f():!1:void("set"===a&&(e?c.setAttribute("data-inapp",f()):c.setAttribute("data-inapp",e)))},layout:function(a){var g,b=this,c=b.root,d=b.bpsInfo,e=b.scrSize.width(),f=b.getInformation.device;return a=a||"get",f=f[0],"phone"==f||"tablet"==f&&e<d.md?g="mobile":("desktop"==f||"tablet"==f&&e>=d.md)&&(g=b.inApp()!==!1?"mobile":"desktop"),"get"===a?g:void("set"===a&&c.setAttribute("data-layout-mode",g))},urCookies:{set:function(a,b,c,d){var e=new Date,f=location.href;d=d||365,e.setTime(e.getTime()+24*d*60*60*1e3);var g="expires="+e.toUTCString();document.cookie=a+"="+b+"; "+g,c&&-1==f.indexOf("file:///")&&location.reload()},get:function(a){var b=a+"=",c=document.cookie.split(";"),d=[];if(c.length>0)for(var e=0;e<c.length;e++){for(var f=c[e];" "==f.charAt(0);)f=f.substring(1);if(d[0]=-1!=f.indexOf(b)?!0:!1,d[0]){d[1]=f.substring(b.length,f.length);break}}else d[0]=!1;return d},remove:function(a){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"},isEnabled:function(){var a=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||a||(document.cookie="testcookie",a=-1!=document.cookie.indexOf("testcookie")?!0:!1),a},update:function(a,b,c,d){var e=this,f=a.getInformation.device,g=a.browserName(),h=a.breakpoints(),i=[a.scrSize.width(),a.scrSize.height()],j='{"lang":"'+a.language("get",a,b)+'","id":"'+a.platforms()+'","class":"'+g[1]+'","data":{"device":"'+f[0]+'","device-type":"'+f[1]+'","device-sim":"'+f[2]+'","browser-name":"'+g[0]+'","browser-version":"'+a.browserVersion()+'","os-name":"'+a.OSName()+'","os-version":"'+a.OSVersion()+'","screen-range":"'+h[0]+'","doc-range":"'+h[1]+'","orientation":"'+a.orientation()+'","layout-mode":"'+a.layout()+'","inapp":'+a.inApp()+',"urb-version":"'+a.project.version+'"},"size":{"width":'+i[0]+', "height":'+i[1]+"}}";if(e.isEnabled()){var k="undefined"!=typeof JSON?JSON.stringify(c):j;e.set("urbrowser",k,d)}else console.log("Please open browser cookie.")}},build:function(a,b,c){var d=[a.scrSize.width(),a.scrSize.height()];a.language("set",a,b),a.platforms("set"),a.browserName("set"),a.device("set"),a.browserVersion("set"),a.OSName("set"),a.OSVersion("set"),a.breakpoints("set"),a.orientation("set"),a.layout("set"),a.inApp("set"),b.setAttribute("data-urb-version",a.project.version);var e={lang:c.lang,id:c.platform,"class":c.browser.name[1],data:{device:c.device[0],"device-type":c.device[1],"device-sim":c.device[2],"browser-name":c.browser.name[0],"browser-version":c.browser.version,"os-name":c.os.name,"os-version":c.os.version,"screen-range":c.ranges[0],"doc-range":c.ranges[1],orientation:c.orientation,"layout-mode":c.layout,inapp:a.inApp(),"urb-version":a.project.version},size:{width:d[0],height:d[1]}};a.urCookies.update(a,b,e)},diff:function(a,b){var c=this,d=c.root,e=d.className,f=a,g=f.data,h=f.size,i=!1;try{g["urb-version"]}catch(j){i=!0}if(i)return c.urCookies.remove("urbrowser"),-1==location.href.indexOf("file:///")&&location.reload(),!1;var k=c.browserName(),l=c.device(),m=c.browserVersion(),n=c.orientation(),o=c.breakpoints(),p=c.layout(),q=[c.scrSize.width(),c.scrSize.height()],r=!1,s=g["urb-version"],t=c.project.version,u=[],v=!1,w={};return b&&(c.language("set",c,d),f.lang=c.language("get",c,d),f["class"]==k[1]?d.className=e.length?e+" "+f["class"]:f["class"]:(d.className=e.length?e+" "+k[1]:k[1],f["class"]=k[1],r=!0,u.push("class")),g.device===l[0]?d.setAttribute("data-device",g.device):(d.setAttribute("data-device",l[0]),g.device=l[0],r=!0,u.push("data-device")),g["device-type"]===l[1]?d.setAttribute("data-device-type",g["device-type"]):(d.setAttribute("data-device-type",l[1]),g["device-type"]=l[1],r=!0,u.push("data-device-type")),g["browser-version"]===m?d.setAttribute("data-browser-version",g["browser-version"]):(d.setAttribute("data-browser-version",m),g["browser-version"]=m,r=!0,u.push("data-browser-version")),g["screen-range"]===o[0]?d.setAttribute("data-screen-range",g["screen-range"]):(d.setAttribute("data-screen-range",o[0]),g["screen-range"]=o[0],r=!0,u.push("data-screen-range")),Number(s)&&Number(t)==Number(s)?d.setAttribute("data-urb-version",s):(d.setAttribute("data-urb-version",t),g["urb-version"]=t,r=!0,u.push("data-urb-version"))),g["device-sim"]===l[2]?d.setAttribute("data-device-sim",g["device-sim"]):(d.setAttribute("data-device-sim",l[2]),g["device-sim"]=l[2],r=!0,u.push("data-device-sim")),g.orientation===n?d.setAttribute("data-orientation",g.orientation):(d.setAttribute("data-orientation",n),g.orientation=n,r=!0,u.push("data-orientation"),"mobile"===l[1]&&"tablet"===l[0]&&(v=!0)),g["doc-range"]===o[0]?d.setAttribute("data-doc-range",g["doc-range"]):(d.setAttribute("data-doc-range",o[0]),g["doc-range"]=o[0],r=!0,u.push("data-doc-range")),g["layout-mode"]==p?d.setAttribute("data-layout-mode",g["layout-mode"]):(d.setAttribute("data-layout-mode",p),g["layout-mode"]=p,r=!0,u.push("layout")),h.width=q[0],h.height=q[1],f.data=g,f.size=h,w.whichs=u,w.isDiff=r,w.newObj=f,w.needReload=v,w},update:function(a,b){var c=this,d=c.root,e="undefined"!=typeof JSON?JSON.parse(a):new Function("return "+a)(),f=e.data,g=c.diff(e,b);d.setAttribute("id",e.id),d.setAttribute("data-browser-name",f["browser-name"]),d.setAttribute("data-os-name",f["os-name"]),d.setAttribute("data-os-version",f["os-version"]),d.setAttribute("data-inapp",f.inapp),g.isDiff&&(c.urCookies.remove("urbrowser"),b?c.urCookies.update(c,d,g.newObj,!0):c.urCookies.update(c,d,g.newObj,g.needReload))},done:function(){function f(){a.resizeInfo(a)}var d,a=this,b=a.root,c=a.getInformation,e=500;c.getName=a.getName(a),c.getVersion=a.getVersion(),c.getBrowserNameAndCore=a.getBrowserNameAndCore(),c.lang=a.language("get",a,b),c.platform=a.platforms(),c.device=a.device(),c.browser={},c.browser.name=a.browserName(),c.browser.version=a.browserVersion(),c.os={},c.os.name=a.OSName(),c.os.version=a.OSVersion(),c.ranges=a.breakpoints(),c.orientation=a.orientation(),c.layout=a.layout(),a.urCookies.get("urbrowser")[0]?a.update(a.urCookies.get("urbrowser")[1],!0):a.build(a,b,c),window.addEventListener?window.addEventListener("resize",function(){clearTimeout(d),d=setTimeout(f,e)},!1):window.attachEvent("onresize",function(){clearTimeout(d),d=setTimeout(f,e)},!1)}};var b=new a;b.done()}(window);