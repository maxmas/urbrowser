!function(){"use strict";var a=function(){};a.prototype={project:{name:"urBrowser",version:"3.160331",author:"Kei Cheng",github:"https://github.com/keicheng/urbrowser",website:"http://urbrowser.kule.tw",facebook:"https://www.facebook.com/kule.tw",cdnjs:"https://cdnjs.com/libraries/kule.lazy",license:"MIT License"},root:document.documentElement,getAgent:navigator.userAgent.toLowerCase(),getPlatform:navigator.platform.toLowerCase(),docSize:{width:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},scrSize:{width:function(){return screen.width},height:function(){return screen.height}},bpsInfo:{xs:480,sm:768,md:992,lg:1200},getName:function(){var a=this,b=a.getAgent;return-1!=b.indexOf("iemobile")?"iemobile":-1!=b.indexOf("cordova")?"cordova":-1!=b.indexOf("opr")||-1!=b.indexOf("opera")||-1!=b.indexOf("opios")?-1!=b.indexOf("version")?"version":-1!=b.indexOf("opios")?"opios":"opr":-1!=b.indexOf("firefox")?"firefox":-1!=b.indexOf("fxios")?"fxios":-1!=b.indexOf("msie")?"msie":-1!=b.indexOf("rv:")&&-1!=b.indexOf("windows")?"rv":-1!=b.indexOf("applewebkit")?-1!=b.indexOf("edge")?"edge":-1!=b.indexOf("chrome")?"chrome":-1!=b.indexOf("version")?"version":-1!=b.indexOf("crios")?"crios":"safari":null},getVersion:function(a,b){var c=this,d=c.getAgent;if(b=b||"int",a){var e=a.length,f=d.indexOf(a)+e+1,g=20,h=d.substr(f,g),i=/[0-9\.]*/g;return h=h.match(i)[0],h="int"===b?parseInt(h,10):h}return null},OSName:function(a){var b=this,c=b.root,d=b.getAgent,e=b.platforms(),f=e;return a=a||"get","linux"==e?f=-1!=d.indexOf("ubuntu")?"ubuntu":"linux":"windows"==e?f=-1!=d.indexOf("windows nt")?"windows nt":"windows":"iphone"==e||"ipad"==e||"ipod"==e?f="ios":"android"==e&&(f="android"),"get"===a?f:void("set"===a&&c.setAttribute("data-os-name",f))},OSVersion:function(a){var b=this,c=b.root,d=b.getAgent,e=b.getPlatform,f=b.OSName(),g="mac"===f||"iphone"===e||"ipad"===e?/[0-9_]*/g:/[0-9\.]*/g;a=a||"get","wp"===f?f="windows phone":"chromeos"==f?f="cros i686":"mac"===f?f="mac os x":"ipad"===e?f="cpu os":"iphone"===e&&(f="iphone os");var h=f.length,i=d.indexOf(f)+h+1,j=10,k=d.substr(i,j);return k=k.match(g)[0],k=k.replace(/[_]+/g,"."),"get"===a?k:void("set"===a&&k.length&&c.setAttribute("data-os-version",k))},getBrowserNameAndCore:function(){var e,f,g,a=this,b=a.getAgent,c=a.getName(),d=a.getVersion(c);if(null===c?g=null:"fxios"==c?(e=" firefox",f="fxios",g=f+e):"opr"==c||"opera"==c||"opios"==c?(f="opera",e=-1!=b.indexOf("applewebkit")?" webkit":" presto",g=f+e):"version"==c||"chrome"==c||"crios"==c||"safari"==c?(e=" webkit","edge"==c?f="edge":"chrome"==c||"crios"==c?f="chrome":"version"==c?-1!=b.indexOf("opr")||-1!=b.indexOf("opera")||-1!=b.indexOf("opios")?(f="opera",e=-1!=b.indexOf("applewebkit")?"webkit":"presto",g=f+e):f=-1!=b.indexOf("android")?"adrBuiltin":"safari":f="safari",g=f+e):"msie"==c||"rv"==c||"iemobile"==c?(e="ie",f="ie",g=e):("cordova"===c?(e=" webkit inapp",-1!=b.indexOf("cordova-android")?f="cordova-adr cordova":-1!=b.indexOf("cordova-ios")&&(f="cordova-ios cordova"),g=f+e,d=null):-1!=b.indexOf("iemobile")||-1!=b.indexOf("msie")?g=c+" ie":-1!=b.indexOf("applewebkit")?(e=" webkit",e=-1!=b.indexOf("edge")?" webkit":-1!=b.indexOf("chrome")||-1!=b.indexOf("crios")?" chrome webkit":-1!=b.indexOf("version")&&-1!=b.indexOf("android")?" adrBuiltin webkit":" safari webkit",g=c+e):g=c,f=c),null!==d){var h=f+d,i=g.split(" "),j=i[0]+" "+h;if(i.length>1)for(var k=1;k<i.length;k++)j+=" "+i[k];if("ie"===f)for(var l=11,m=Number(d),n=m;l>n;n++)j+=" "+f+(n+1)+"lt";return j}return g},platforms:function(a){var f,b=this,c=b.root,d=b.getAgent,e=b.getPlatform;return a=a||"get",e.match("win32")||e.match("win64")||e.match("windows")?-1!=d.indexOf("windows phone")||-1!=d.indexOf("iemobile")?f="wp":-1!=d.indexOf("windows")&&(f="windows"):e.match("arm")?-1!=d.indexOf("windows phone")||-1!=d.indexOf("iemobile")?f="wp":-1!=d.indexOf("android")&&(f="android"):f=-1!=e.indexOf("linux")?-1!=d.indexOf("cros")?"chromeos":-1!=d.indexOf("android")?"android":"linux":-1!=e.indexOf("iphone")?"iphone":-1!=e.indexOf("ipad")?"ipad":-1!=e.indexOf("ipod")?"ipod":-1!=e.indexOf("android")?"android":-1!=e.indexOf("mac")?"mac":-1!=e.indexOf("x11")?"unix":-1!=e.indexOf("sunos")?"solaris":"unknown","get"===a?f:void("set"===a&&(c.id=f))},browserVersion:function(a){var g,b=this,c=b.root,d=b.getAgent,e=b.getName(),f=b.getVersion(e,"float");return a=a||"get",g=-1!=d.indexOf(e)?f:"unknown","get"===a?g:void("set"===a&&c.setAttribute("data-browser-version",g))},device:function(a){var h,i,j,b=this,c=b.root,d=b.getAgent,e=b.docSize.width(),f=b.scrSize.width(),g=b.bpsInfo;return a=a||"get",h=-1!=d.indexOf("mobile")||window.orientation?"mobile":"android"===b.platforms()?"mobile":"desktop",i="mobile"==h?f<g.sm?"phone":"tablet":"desktop",e<g.sm?j="phone":e>=g.sm&&e<g.md?j="tablet":e>=g.md&&(j="desktop"),"get"==a?[i,h,j]:void("set"==a&&(c.setAttribute("data-device",i),c.setAttribute("data-device-type",h),c.setAttribute("data-device-sim",j)))},orientation:function(a){var f,b=this,c=b.root,d=b.docSize,e=b.device();return a=a||"get",e=e[1],f="desktop"===e?d.width()>=d.height()?"landscape":"portrait":90==Math.abs(window.orientation)?"landscape":"portrait","get"===a?f:void("set"===a&&c.setAttribute("data-orientation",f))},breakpoints:function(a){var g,h,b=this,c=b.root,d=b.docSize.width(),e=b.scrSize.width(),f=b.bpsInfo;return a=a||"get",d<f.sm?g="screen-xs":d>=f.sm&&d<f.md?g="screen-sm":d>=f.md&&d<f.lg?g="screen-md":d>=f.lg&&(g="screen-lg"),e<f.sm?h="screen-xs":e>=f.sm&&e<f.md?h="screen-sm":e>=f.md&&e<f.lg?h="screen-md":e>=f.lg&&(h="screen-lg"),"get"===a?[h,g]:void("set"===a&&(c.setAttribute("data-screen-range",h),c.setAttribute("data-doc-range",g)))},language:function(a){var b=this,c=b.root,d=c.lang;return a=a||"get",(null===d||""===d||"undefined"==d)&&(d=navigator.language||navigator.browserLanguage||navigator.systemLanguage),"get"===a?d:void("set"===a&&(c.lang=d))},resizeInfo:function(a){a.orientation("set"),a.layout("set"),a.orientation(),"desktop"!==a.device()&&a.update(a.urCookies.get("urbrowser")[1],!1)},browserName:function(a){var e,b=this,c=b.root,d=b.getBrowserNameAndCore(),f=c.className;if(a=a||"get",d){var g=d.split(" ");e=g[0]}else e="unknown";return"get"===a?[e,d]:void("set"===a&&(f.length?c.className+=" "+d:c.className=d,c.setAttribute("data-browser-name",e)))},inApp:function(a){var b=this,c=b.root,d=b.getAgent,e=-1!=d.indexOf("cordova")?!0:!1;a=a||"get";var f=function(){return-1!=d.indexOf("cordova-ios")?"ios":-1!=d.indexOf("cordova-android")?"android":void 0};return"get"===a?e?f():!1:void("set"===a&&(e?c.setAttribute("data-inapp",f()):c.setAttribute("data-inapp",e)))},layout:function(a){var g,b=this,c=b.root,d=b.bpsInfo,e=b.scrSize.width(),f=b.device();return a=a||"get",f=f[0],"phone"==f||"tablet"==f&&e<d.md?g="mobile":("desktop"==f||"tablet"==f&&e>=d.md)&&(g=b.inApp()!==!1?"mobile":"desktop"),"get"===a?g:void("set"===a&&c.setAttribute("data-layout-mode",g))},urCookies:{set:function(a,b,c,d){var e=new Date,f=location.href;d=d||365,e.setTime(e.getTime()+24*d*60*60*1e3);var g="expires="+e.toUTCString();document.cookie=a+"="+b+"; "+g,c&&-1==f.indexOf("file:///")&&location.reload()},get:function(a){var b=a+"=",c=document.cookie.split(";"),d=[];if(c.length>0)for(var e=0;e<c.length;e++){for(var f=c[e];" "==f.charAt(0);)f=f.substring(1);if(d[0]=-1!=f.indexOf(b)?!0:!1,d[0]){d[1]=f.substring(b.length,f.length);break}}else d[0]=!1;return d},remove:function(a){document.cookie=a+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"},isEnabled:function(){var a=navigator.cookieEnabled?!0:!1;return"undefined"!=typeof navigator.cookieEnabled||a||(document.cookie="testcookie",a=-1!=document.cookie.indexOf("testcookie")?!0:!1),a},update:function(a,b,c){var d=this,e=a.device(),f=a.browserName(),g=a.breakpoints(),h=[a.scrSize.width(),a.scrSize.height()],i='{"lang":"'+a.language()+'","id":"'+a.platforms()+'","class":"'+f[1]+'","data":{"device":"'+e[0]+'","device-type":"'+e[1]+'","device-sim":"'+e[2]+'","browser-name":"'+f[0]+'","browser-version":"'+a.browserVersion()+'","os-name":"'+a.OSName()+'","os-version":"'+a.OSVersion()+'","screen-range":"'+g[0]+'","doc-range":"'+g[1]+'","orientation":"'+a.orientation()+'","layout-mode":"'+a.layout()+'","inapp":'+a.inApp()+',"urb-version":"'+a.project.version+'"},"size":{"width":'+h[0]+', "height":'+h[1]+"}}";if(d.isEnabled()){var j="undefined"!=typeof JSON?JSON.stringify(b):i;d.set("urbrowser",j,c)}else console.log("Please open browser cookie.")}},build:function(){var a=this,b=a.root,c=a.device(),d=a.browserName(),e=a.breakpoints(),f=[a.scrSize.width(),a.scrSize.height()];a.language("set"),a.platforms("set"),a.browserName("set"),a.device("set"),a.browserVersion("set"),a.OSName("set"),a.OSVersion("set"),a.breakpoints("set"),a.orientation("set"),a.layout("set"),a.inApp("set"),b.setAttribute("data-urb-version",a.project.version);var g={lang:a.language(),id:a.platforms(),"class":d[1],data:{device:c[0],"device-type":c[1],"device-sim":c[2],"browser-name":d[0],"browser-version":a.browserVersion(),"os-name":a.OSName(),"os-version":a.OSVersion(),"screen-range":e[0],"doc-range":e[1],orientation:a.orientation(),"layout-mode":a.layout(),inapp:a.inApp(),"urb-version":a.project.version},size:{width:f[0],height:f[1]}};a.urCookies.update(a,g)},diff:function(a,b){var c=this,d=c.root,f=(d.lang,d.className),g=a,h=g.data,i=g.size,j=!1;try{h["urb-version"]}catch(k){j=!0}if(j)return c.urCookies.remove("urbrowser"),-1==location.href.indexOf("file:///")&&location.reload(),!1;var l=c.browserName(),m=c.device(),n=c.browserVersion(),o=c.orientation(),p=c.breakpoints(),q=c.layout(),r=[c.scrSize.width(),c.scrSize.height()],s=!1,t=h["urb-version"],u=c.project.version,v=[],w=!1,x={};return b&&(c.language("set"),g.lang=c.language(),g["class"]==l[1]?d.className=f.length?f+" "+g["class"]:g["class"]:(d.className=f.length?f+" "+l[1]:l[1],g["class"]=l[1],s=!0,v.push("class")),h.device===m[0]?d.setAttribute("data-device",h.device):(d.setAttribute("data-device",m[0]),h.device=m[0],s=!0,v.push("data-device")),h["device-type"]===m[1]?d.setAttribute("data-device-type",h["device-type"]):(d.setAttribute("data-device-type",m[1]),h["device-type"]=m[1],s=!0,v.push("data-device-type")),h["browser-version"]===n?d.setAttribute("data-browser-version",h["browser-version"]):(d.setAttribute("data-browser-version",n),h["browser-version"]=n,s=!0,v.push("data-browser-version")),h["screen-range"]===p[0]?d.setAttribute("data-screen-range",h["screen-range"]):(d.setAttribute("data-screen-range",p[0]),h["screen-range"]=p[0],s=!0,v.push("data-screen-range")),Number(t)&&Number(u)==Number(t)?d.setAttribute("data-urb-version",t):(d.setAttribute("data-urb-version",u),h["urb-version"]=u,s=!0,v.push("data-urb-version"))),h["device-sim"]===m[2]?d.setAttribute("data-device-sim",h["device-sim"]):(d.setAttribute("data-device-sim",m[2]),h["device-sim"]=m[2],s=!0,v.push("data-device-sim")),h.orientation===o?d.setAttribute("data-orientation",h.orientation):(d.setAttribute("data-orientation",o),h.orientation=o,s=!0,v.push("data-orientation"),"mobile"===m[1]&&"tablet"===m[0]&&(w=!0)),h["doc-range"]===p[0]?d.setAttribute("data-doc-range",h["doc-range"]):(d.setAttribute("data-doc-range",p[0]),h["doc-range"]=p[0],s=!0,v.push("data-doc-range")),h["layout-mode"]==q?d.setAttribute("data-layout-mode",h["layout-mode"]):(d.setAttribute("data-layout-mode",q),h["layout-mode"]=q,s=!0,v.push("layout")),i.width=r[0],i.height=r[1],g.data=h,g.size=i,x.whichs=v,x.isDiff=s,x.newObj=g,x.needReload=w,x},update:function(a,b){var c=this,d=c.root,e="undefined"!=typeof JSON?JSON.parse(a):new Function("return "+a)(),f=e.data,h=(c.platforms(),c.diff(e,b));d.setAttribute("id",e.id),d.setAttribute("data-browser-name",f["browser-name"]),d.setAttribute("data-os-name",f["os-name"]),d.setAttribute("data-os-version",f["os-version"]),d.setAttribute("data-inapp",f.inapp),h.isDiff&&(c.urCookies.remove("urbrowser"),b?c.urCookies.update(c,h.newObj,!0):c.urCookies.update(c,h.newObj,h.needReload))},done:function(){function e(){a.resizeInfo(a)}var c,a=this,d=(a.root,500);a.urCookies.get("urbrowser")[0]?a.update(a.urCookies.get("urbrowser")[1],!0):a.build(),window.addEventListener?window.addEventListener("resize",function(){clearTimeout(c),c=setTimeout(e,d)},!1):window.attachEvent("onresize",function(){clearTimeout(c),c=setTimeout(e,d)},!1)}};var b=new a;b.done()}(window);